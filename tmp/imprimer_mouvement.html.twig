{% extends 'cv/print_base.html.twig' %}
{% block body %}
	<style>
		.gras {
			font-weight: bold;
		}
		.mb10 {
			margin-bottom: 10px;
		}
		.border0 th {
			border: 1px solid #000000;
			background: #E3E5E5;
			color: #000000;
			padding: 5px;
			font-weight: bold;
			font-size: 11px;
			text-align: center;
			word-wrap: break-word;
			vertical-align: middle;
		}
		.border0 td {
			border-left: 1px solid #000000;
			border-right: 1px solid #000000;
			border-top: none;
			border-bottom: none;
			padding: 3px;
			font-size: 10px;
			vertical-align: middle;
		}
		.p100p {
			width: 100%;
		}
		.p10p {
			width: 10%;
		}
		.p15p {
			width: 15%;
		}
		.border th {
			border: 1px solid #000000;
			color: white;
			background: #183152;
			padding: 5px;
			font-weight: normal;
			font-size: 12px;
			text-align: center;
			vertical-align: middle;
		}
		.border td {
			border: 1px solid #000000;
			/*padding: 5px 10px;*/
			vertical-align: middle;
			font-size: 10px;
		}
		.centre,
		.center {
			text-align: center;
		}
		.droite,
		.right {
			text-align: right;
		}
		.gauche,
		.left {
			text-align: left;
		}
		.infoCentre {
			margin-top: 0;
			margin-left: 15px;
			color: #000000;
			font-size: 11px;
			line-height: 15px;

		}
		.fondEntete {
			border: 1px solid gray;
			border-radius: 5px;
			background: #E3E5E5;
			color: #000000;
			width: 60%;
		}
	</style>
	<table style="width:700px;">
		<tr>
			<td rowspan="2" style="width: 40%;">
				<img src="{{ absolute_url(asset(logo))}}" alt="" style="width:150px;"><br/>
				<p class="infoCentre">
					{{filiale.nomPublic}}<br>
					{{filiale.numeroRue|default("")~' '~ filiale.rue|default('')}}<br>
					{{filiale.codeCp|default('')~' '~ filiale.ville|default('')}}<br>
					{{'Tél:'~ filiale.telephoneFixe|default('')}}<br>
					{{filiale.siteWeb}}<br>
				</p>
			</td>
			<td></td>
			<td class="fondEntete " style="width: 30%; padding: 5px 10px;margin-left:150px;">
				<span class="size12 gras">{{libelleTypeMouvement|upper}}
				</span><br/>
				<span class="size10 gras">Numéro:</span>
				<span class="size12">
					{{mouvement.numeroMouvement|default("")}}</span><br/>
				<span class="size10 gras">Date:</span>
				<span class="size12">
					{{dateMouvement}}
				</span><br>
				<span class="size10 gras">N° client:</span>
				<span class="size12">
					{{numClient}}
				</span><br>
			</td>
		</tr>
		<tr>
			<td colspan="2" style="width: 55%;padding-top:5px;color:#183152;">
				<br>
				<span class="size12 gras">{{client.nomPublic}}</span><br/>
				<span class="size10 ">
					{{adresseClient.numeroRue ~' '~adresseClient.rue|default('')}}
				</span><br/>
				{% if adresseClient.complement %}
					<span class="size10 ">
						{{adresseClient.complement|default('')}}
					</span><br/>
				{% endif %}
				<span class="size10 ">
					{{adresseClient.codeCp~' '~adresseClient.ville}}</span><br/>
				<span class="size10 ">
					{{adresseClient.departement_libelle}},
					{{adresseClient.pays_libelle}}
				</span><br/>
			</td>
		</tr>
	</table>
	{% set src="logo/Logo.png" %}
	{% set fixe="filiale.telephoneFixe|default('')" %}
	{% set mobile="filiale.telephoneMobile|default('')" %}
	{% for key, page in pages %}
		{% if (not loop.first) %}
			<page>
			{% endif %}

			<div style="width:750px;margin-top:5px;">
				<div class="mb10 gras">{{mouvement.intitule}}</div>
				{% set print_mouvement_lignes = page %}
				<table class="border0 p100p">
					<tr>
						<th class="p10p">Quantité</th>
						<th class="p10p">Unité</th>
						<th>Désignation</th>
						<th class="p10p">TVA</th>
						<th class="p10p">Prix
							<br>Unitaire</th>
						<th class="p10p">Montant</th>
					</tr>
					{% set caratere=(interface=='C')?'color:black;font-size:11px;':''%}
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					{% set k=0 %}
					{% for  ligne in print_mouvement_lignes %}
						{% set k=k+1 %}
						{% set ligne_vide = ligne.quantite ~ ligne.unite ~ ligne.montant  %}
						{% set h=(not ligne_vide and interface=='C')?'color:#ffffff;':''%}
						{% set border =(loop.last and key!=np)?'border':''%}
						<tr class="{{border}}">
							<td class="droite p10p" style="{{caratere}} {{h}}">{{ligne.quantite|default('.')}}</td>
							<td class="centre p10p" style="{{caratere}}">{{ligne.unite|raw}}</td>
							<td class="gauche " style="{{caratere}}line-height: 1;">{{ligne.description|raw}}</td>
							<td class="centre p10p" style="{{caratere}}">{{ligne.tva_valeur}}</td>
							<td class="droite p10p pr5" style="{{caratere}}">{{ligne.pu}}</td>
							<td class="droite p10p pr5" style="{{caratere}}">{{ligne.montant}}</td>
						</tr>
					{% endfor %}

					{% if (key==np)%}
						{% set reste=(nl-(k+10)) %}
						{% set reste=(reste <=0)?1:reste %}
						{% for r in 1..reste %}
							{% set border =(loop.last)?'border':''%}
							<tr class="">
								<td style="color:#ffffff">.</td>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
							</tr>
						{% endfor %}
						{% for ligne in footers %}
							<tr class="border">
								<td class="centre"></td>
								<td class="centre"></td>
								<td class="gauche pied">{{ligne.description|raw}}</td>
								<td class="centre pied">{{ligne.tva_valeur|raw}}</td>
								<td class="droite pied pr5">{{ligne.pu|raw}}</td>
								<td class="droite pied pr5">{{ligne.montant|raw}}</td>
							</tr>
						{% endfor %}
					{% endif %}
				</table>
				{%if (key==np)%}
					{% if type=='F' %}
						<p class="mt20">
							<span class="size12 gras navy arial">Conditions de règlement :</span>
							<span class='size10 arial'>{{modePaiement.libelle|default('')|raw}}</span>
						</p>
					{% endif %}
					<p class="border mt10">
						{% if type=='F' %}
							<p class="mt20">
								<span class="size12 gras navy arial">Échéance :</span>
								<span class='size10 arial'>{{reglement.dateEcheance|date('d-m-Y')}}</span>
							</p>
						{% endif %}
					</p>

					{{basDePage|default("")|raw}}
					{%endif%}
				</div>
				<br/>

				{% if (key > 1) %}
				</page>
			{% endif %}
		{% endfor %}
		
	{% endblock %}
